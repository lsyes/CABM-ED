# AI配置重构说明

## 改进内容

### 1. 配置模板系统

新增两个预设配置模板：

#### 免费模板
- **对话模型**: Qwen/Qwen2.5-7B-Instruct
- **总结模型**: Qwen/Qwen2.5-7B-Instruct  
- **TTS模型**: FunAudioLLM/CosyVoice2-0.5B
- **特点**: 性能较低，但完全免费。适合测试和体验。

#### 标准模板（推荐）
- **对话模型**: deepseek-ai/DeepSeek-V3.2-Exp
- **总结模型**: Qwen/Qwen3-8B
- **TTS模型**: FunAudioLLM/CosyVoice2-0.5B
- **特点**: 性能优秀，价格合理。推荐使用。

### 2. 快速配置页面改进

- 添加模板选择器（免费/标准）
- 显示所选模板的简介
- "保存配置"按钮改为"应用配置"按钮
- 应用配置时，将模板内容填入详细配置并保存

### 3. 统一的保存格式

不再区分"快速"和"详细"两种保存模式，统一使用以下格式：

```json
{
  "api_key": "sk-...",
  "chat_model": {
    "model": "...",
    "base_url": "...",
    "api_key": "..."
  },
  "summary_model": {
    "model": "...",
    "base_url": "...",
    "api_key": "..."
  },
  "tts_model": {
    "model": "...",
    "base_url": "...",
    "api_key": "..."
  }
}
```

### 4. 初始设置默认行为

- 用户在初始设置中输入API密钥时，自动应用"标准"模板
- 确保新用户获得最佳的开箱体验

### 5. 配置同步

- 快速配置和详细配置页面保持同步
- 在任一页面保存后，另一页面会自动更新显示

## 使用方式

### 快速配置
1. 选择模板（免费/标准）
2. 查看模板简介
3. 输入API密钥
4. 点击"应用配置"

### 详细配置
- 可以手动修改各个模型的配置
- 保存后会同步更新快速配置页面的API密钥显示

## 技术实现

### 配置模板定义
在 `scripts/ai_config_panel.gd` 中定义 `CONFIG_TEMPLATES` 常量

### 模板选择
使用 ButtonGroup 实现互斥的单选按钮

### 配置应用
快速配置的"应用配置"按钮会：
1. 读取选中的模板
2. 将模板内容与用户输入的API密钥组合
3. 保存到配置文件
4. 同步更新详细配置页面
5. 重新加载AI和TTS服务

## 向后兼容

- 保留对旧配置格式的支持
- 自动从 `api_keys.json` 迁移到新格式
