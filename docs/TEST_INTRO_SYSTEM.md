# 🎮 开场系统快速测试

## 立即测试

### 方法1：删除存档测试首次启动

#### Windows
```cmd
del "%APPDATA%\Godot\app_userdata\CABM-ED\saves\save_slot_1.json"
```

然后运行游戏，你会看到：
1. ✨ 开场故事（5段文本逐字显示）
2. ⚙️ 初始设置界面
3. 🎯 输入信息后进入游戏

### 方法2：在游戏中测试

1. 运行游戏
2. 按 **F12** 打开存档调试面板
3. 点击"删除存档"
4. 重启游戏

## 预期效果

### 首次启动 🆕
```
┌─────────────────────────┐
│   开场故事场景          │
│   (index.png背景)       │
│                         │
│   "在这个世界的某个     │
│    角落..."            │
│                         │
│   [继续] 按钮           │
└─────────────────────────┘
         ↓
┌─────────────────────────┐
│   初始设置              │
│                         │
│   你的名字: [____]      │
│   角色名称: [雪狐]      │
│   API密钥:  [____]      │
│   (可选)                │
│                         │
│   提示：你的每一个      │
│   选择都很重要          │
│                         │
│   [开始游戏]            │
└─────────────────────────┘
         ↓
     主游戏场景
```

### 再次启动 🔄
```
游戏启动 → 直接进入主游戏
(跳过开场和设置)
```

## 功能测试清单

### 基础功能
- [ ] 开场背景图片显示正确
- [ ] 开场文本逐字显示
- [ ] 点击可跳过文本动画
- [ ] 5段文本自动播放
- [ ] "继续"按钮出现
- [ ] 进入初始设置界面
- [ ] 用户名必填验证
- [ ] 角色名默认值"雪狐"
- [ ] API密钥可选
- [ ] 提示文字显示正确
- [ ] 点击"开始游戏"进入主游戏
- [ ] 数据正确保存
- [ ] 再次启动跳过开场

### 提前退出测试（v1.1）
- [ ] 开场阶段退出不创建存档
- [ ] 设置阶段退出不创建存档
- [ ] 部分填写后退出不保存数据
- [ ] 再次启动仍显示开场

## 快速验证

### 检查数据是否保存

#### 1. 角色名
打开 `config/app_config.json`，查看：
```json
{
  "character_name": "你输入的角色名"
}
```

#### 2. 存档文件
检查文件是否存在：
```
%APPDATA%\Godot\app_userdata\CABM-ED\saves\save_slot_1.json
```

#### 3. API密钥（如果输入了）
检查文件：
```
%APPDATA%\Godot\app_userdata\CABM-ED\api_keys.json
```

## 控制台输出

### 首次启动应该看到：
```
首次进入游戏，播放开场动画
角色名称已保存: [角色名]
初始存档已创建，用户名: [用户名], 角色名: [角色名]
```

### 再次启动应该看到：
```
检测到存档，直接进入游戏
```

## 遇到问题？

### 开场不显示
- 检查 `project.godot` 的 `run/main_scene` 是否为 `res://scenes/game_launcher.tscn`
- 检查场景文件是否存在

### 点击"开始游戏"没反应
- 查看控制台错误信息
- 确认SaveManager已加载
- 检查用户名是否已填写

### 再次启动仍显示开场
- 确认存档文件已创建
- 检查存档路径是否正确
- 查看控制台输出

## 详细文档

- 📖 [完整使用指南](docs/intro_system_guide.md)
- 🧪 [详细测试指南](docs/intro_system_test.md)
- 📝 [实现总结](docs/INTRO_SYSTEM_SUMMARY.md)

---

**提示**: 首次测试建议删除存档，体验完整的首次启动流程！
